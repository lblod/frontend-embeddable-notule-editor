<!DOCTYPE html>
<html>
  <head>
    <title>I have an editor in my document</title>
    <meta charset="utf-8" />
    <!-- Requirements for the style -->
    <link
      rel="stylesheet"
      href="assets/frontend-embeddable-notule-editor.css"
    />
    <link rel="stylesheet" href="assets/vendor.css" />
    <!-- Style of this demo app, NOT REQUIRED -->
    <link rel="stylesheet" href="assets/demo.css" />
    <!-- Sources of the editor -->
    <script src="assets/vendor.js"></script>
    <script src="assets/frontend-embeddable-notule-editor-app.js"></script>
    <script src="assets/frontend-embeddable-notule-editor.js"></script>
  </head>

  <!-- Next up, we put some tags in the body of our web page. We'll place the editor in those tags. -->

  <body>
    <div class="au-c-content au-u-padding-tiny au-u-padding-left demo-header">
      <h1>Embeddable RDFa editor</h1>
      <button
        id="insertBesluit"
        class="au-c-button au-c-button--primary au-u-margin-tiny au-u-margin-left-none"
      >
        Insert besluit template
      </button>
      Plugins:
      <input type="checkbox" id="plugin-besluit" value="besluit" checked="checked" /> besluit
      <input type="checkbox" id="plugin-citaat" value="citaten-plugin" checked="checked" /> citaten
      <input type="checkbox" id="plugin-roadsign" value="roadsign-regulation" checked="checked" /> mobiliteitsmaatregelen
      <input type="checkbox" id="plugin-variable" value="template-variable" checked="checked" /> template variabelen
    </div>
    <div
      id="my-editor"
      class="demo-content"
      prefix="besluit: http://data.vlaanderen.be/ns/besluit#"
    ></div>

    <!-- Lastly, we'll instantiate the editor. We wait until the dom has loaded using an event listener and we'd put this script in the head, but you can use another method if desired. -->

    <script>
      window.addEventListener('load', function () {
        let App =
          require('frontend-embeddable-notule-editor/app').default.create({
            autoboot: false,
            name: 'frontend-embeddable-notule-editor',
          });
        // Lanuch the editor
        let editor;
        App.visit('/', { rootElement: '#my-editor' }).then(() => {
          const editorContainer = document.getElementById('my-editor');
          const editorElement =
          editorContainer.getElementsByClassName('notule-editor')[0];
          editorElement.setActivePlugins('citaten-plugin', 'besluit', 'template-variable',
                                         'roadsign-regulation');
          editorElement.enableEnvironmentBanner();
          editor = editorElement;
        });
        const pluginCheckboxes = document.querySelectorAll('input[id^=plugin]');
        for (const checkbox of pluginCheckboxes) {
          checkbox.addEventListener('change', function() {
            if (this.checked) {
              editor.enablePlugin(this.value);
            }
            else {
              editor.disablePlugin(this.value);
            }
          });
        }
        document
          .getElementById('insertBesluit')
          .addEventListener('click', function () {
            const editorElement = document
              .getElementById('my-editor')
              .getElementsByClassName('notule-editor')[0];
            editorElement.setHtmlContent(`<div property="prov:generated" resource="http://data.lblod.info/id/besluit        var i = 0;
        document
          .getElementById('theButton')
          .addEventListener('click', function () {
            const editorElement = document
              .getElementById('my-editor')
              .getElementsByClassName('notule-editor')[0];
            editorElement.setHtmlContent('<b>the content ' + i++ + '</b>');
            console.log(editorElement.getHtmlContent());
          });
en/abc1234567890" typeof="besluit:Besluit ext:BesluitNieuweStijl https://data.vlaanderen.be/id/concept/BesluitType/256bd04a-b74b-4f2a-8f5d-14dda4765af9">
            <p>Openbare titel besluit:</p>
            <h4 class="h4" property="eli:title" datatype="xsd:string"><span class="mark-highlight-manual">Geef titel besluit op</span></h4>
            <span style="display:none;" property="eli:language" resource="http://publications.europa.eu/resource/authority/language/NLD" typeof="skos:Concept">&nbsp;</span>
            <br>
            <p>Korte openbare beschrijving:</p>
            <p property="eli:description" datatype="xsd:string"><span class="mark-highlight-manual">Geef korte beschrijving op</span></p>
            <br>
            <div property="besluit:motivering" lang="nl">
              <p>
                <span class="mark-highlight-manual">geef bestuursorgaan op</span>,
              </p>
              <br>
              <h5>Bevoegdheid</h5>
              <ul class="bullet-list">
                <li><span class="mark-highlight-manual">Rechtsgrond die bepaald dat dit orgaan bevoegd is.</span></li>
              </ul>
              <br>
              <h5>Juridische context</h5>
              <ul class="bullet-list">
                <li><span class="mark-highlight-manual">Voeg juridische context in</span></li>
              </ul>
              <br>
              <h5>Feitelijke context en argumentatie</h5>
              <ul class="bullet-list">
                <li><span class="mark-highlight-manual">Voeg context en argumentatie in</span></li>
              </ul>
            </div>
            <br>
            <br>
            <h5>Beslissing</h5>
            <div property="prov:value" datatype="xsd:string">
              <div property="eli:has_part" resource="http://data.lblod.info/artikels/abc1234567890" typeof="besluit:Artikel">
                <div>Artikel <span property="eli:number" datatype="xsd:string">1</span></div>
                <span style="display:none;" property="eli:language" resource="http://publications.europa.eu/resource/authority/language/NLD" typeof="skos:Concept">&nbsp;</span>
                <div property="prov:value" datatype="xsd:string">
                  <span class="mark-highlight-manual">Voer inhoud in</span>
                </div>
              </div>
            </div>
          </div>`);
          });
      });
    </script>
  </body>
</html>
